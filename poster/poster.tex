\documentclass[a0,portrait]{a0poster}
%\usepackage{alltt}
\usepackage{color}
\usepackage{times}
\usepackage{amsmath,amsfonts,amssymb} % God matematik
\usepackage{a0poster}
\usepackage{pst-node,graphicx}
\usepackage[utf8]{inputenc} % ÆØÅ pakken
\usepackage[T1]{fontenc}
%\usepackage[pdftex,bookmarks=true,bookmarksnumbered=true]{hyperref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{document}
\title{Centralized State Estimation of Distributed Maritime} % Line one of the title
\titletwo{Autonomous Surface Oceanographers} % Line two of the title.
\author{Rasmus L. Christensen, Federik Juul, Nick \O stergaard, Tudor Muresan, Attila Fodor}
\address{Section for Control and Automation, Department of Electronic Systmes, Aalborg University, Denmark$^\dagger$}
\email{\{ralch,nickoe,fjuul,tudor,attila\}@es.aau.dk}

\makeheader
%% Column 1
\begin{center}
\col{
\paragraph{Introduction}
Greenland has in excess of 30.000 kilometers of coastal line with outdated maps. This poses a danger as cruise ships currently navigate these waters carrying as many as 5000 passengers. If such a ship were to hit a rock and capsize, the nearest rescue station along the eastern coast of Greenland can be as many as 1000 kilometers away, and the infrastructure in these areas are not able to handle such a disaster. Therefore a fast, inexpensive and reliable solution to measuring the coast line will be developed throughout this project? (the last sentence is stupid..). 
\paragraph{Problem}
Jeepers. 

\paragraph{Path Optimization}
The path planner divides the path into straight and turning subsegments. The interesting part of this, is the transition from a straight segment to a turning subsegments. These transitions are each defined by a threshold $\varepsilon_\text{max}$ which defines wether just a circle is enough, or the path would need to converge onto a circle curvature. The transitional curve can be defined as en Euler spiral, which is a function of the normalized Fresnel integral functions $C_F$ and $S_F$ given in equation (\ref{eq:fresnel}):
\begin{align}
C_F(x) = \int_0^x \cos(t^2)dt,\,\,\,\,S_F(x) = \int_0^x \sin(t^2)dt
\label{eq:fresnel}
\end{align}
This transition allows for the ship to keep as much momentum as possible \cite{archibald} whilst transitting from a straight to a turning segment. If the curvature is below the threshold $\varepsilon < \varepsilon_\text{max}$ there needs to be no transitional phase, and the ship goes directly onto the curve - this is depicted on \ref{fig:3points}, if this is the case, only 3 sub-waypoints are computed for the turning phase:
\begin{figure}
	\centering % Figure input
	\includegraphics[width=\threecolwidth]{img/3points}
  	\caption{Sub waypoint calculation when $\varepsilon < \varepsilon_\text{max}$}
	\label{fig:3points}
\end{figure}
The sub-waypoints are generated using the following calculations:
\begin{align}
A_3 = (-X_1,Y_1),\, C_3 = (0,\frac{y_d}{cos(\varepsilon)}),\, E_3 = (X_1,Y_1)
\end{align}
$X_1$ and $Y_1$ are defined as:
\begin{align}
X_1 = x_d \cdot \cos(\varepsilon) + y_d \cdot \sin(\varepsilon),\,\,\,\, Y_1 = X_1 \cdot 	\tan(\varepsilon)
\end{align}
$x_d$ and $y_d$ are the variables calculated by the normalized Fresnel integrals, and contains the factor $\eta$ that is a function of the highest amount of change in acceleration (jerk $j$) the ship experiences:
\begin{align}
x_d = \frac{\pi}{\eta}\cdot C_F(\varepsilon),\,\,\, y_d = \frac{\pi}{\eta}\cdot S_F(\varepsilon),\,\,\, \eta = \frac{\text{max}\{\dot{\alpha}\}}{v^2}
\end{align}
If however the angle $\varepsilon$ is above the threshold, $\varepsilon > \varepsilon_\text{max}$ more sub-waypoints are added due to the transition from a straight segment to a turning segment, this case is plotted on figure \ref{fig:5points}:
\begin{figure}
	\centering % Figure input
	\includegraphics[width=\threecolwidth]{img/5points}
  	\caption{Something}
	\label{fig:5points}
\end{figure}
This adds 2 extra waypoints, $B_5$ and $D_5$. The path inbetween is gien as a circle with centre in $O_5$ and radius $R_min$.  


}
%% Column 2
\rput{Center}{\includegraphics[width=1.9\textwidth]{img/background.pdf}} % Background image
\col{
\paragraph{}
\begin{align}
A_5 &= (-X_1,Y_1),\, B_5 = (-X_2,Y_2),\, C_5 = (0,Y_R)\\
D_5 &= (X_2,Y_2),\, E_5 = (X_1,Y_1)
\end{align}

The computation of these 5 sub-waypoints are carried out as follows:
\begin{align}
X_R &= R_\text{min} \cdot \sin(\varepsilon - \varepsilon _\text{max}),\,\, P_X = X_R + y_d \cdot \sin(\varepsilon)\\
X_1 &= P_X + x_d \cdot \cos(\varepsilon),\,\, Y_1 = X_1 \cdot \tan(\varepsilon)\\
P_Y &= Y_1 - x_d \cdot \sin(\varepsilon),\,\, Y_2 = P_Y + y_d \cdot \cos(\varepsilon)\\
O_Y &= R_\text{min} \cdot \cos(\varepsilon - \varepsilon _\text{max}) + Y_2,\,\, R_Y = O_Y - R_\text{min}\\
X_2 &= X_R
\end{align}
The above computes the optimal path for the ship to follow as well as one where it preserves as much energy as possible whilst sailing it. 

\paragraph{Ship model}
To develop a control algorithm to carry out the inputs computed by the path planning algorithm, a low-level controller is developed. This is based around the 3 degree-of-freedom state model developed for the ship. The state model has been derived to be: \cite{sorensen}:
\begin{align}
\dot{\begin{bmatrix}
v\\
\theta\\
\omega
\end{bmatrix}} = \begin{bmatrix}
\frac{-\beta_x}{m} & 0 & 0\\
0 & 0 & 1\\
0 & 0 & \frac{-\beta_\omega}{I}
\end{bmatrix}\begin{bmatrix}
v\\
\theta\\
\omega
\end{bmatrix} + \begin{bmatrix}
\frac{1}{m} & 0\\
0 & 0\\
0 & \frac{1}{I}
\end{bmatrix}\begin{bmatrix}
F\\
\tau
\end{bmatrix}
\end{align}
$\beta_x$ and $\beta_\omega$ are the linearized skin frictional drag the ship expriences as it moves through the water. $F$ and $\tau$ are the forward force input and the torque generated by the difference in propeller revolutions. The discrete version of this is computed using the zero-order hold algorithm. The low-level control is carried out by reference tracking and optimal feedback control. 

\paragraph{State estimation}
To further improve the amount of 
The ship is fitted with 2 sensors, a GPS and an IMU. The IMU measures the acceleration, the rotational velocity and the magnetic field strength for use in heading calculations. As The purpose is to achieve a better position estimate, the Kalman filter does not use the IMU to this, but instead the velocity measurement, as a double integration of the accelerometer data would yield a squared error, if the IMU is not level, which it is not certain to be. The discrete state model for the Kalman filter can hence be given as:
\begin{align}
\vec{\Phi} = diag\{\vec{\Phi} _x,\vec{\Phi} _y,\vec{\Phi} _\omega\},\,\, \vec{\Phi}_{x,y,\omega}(k) = \begin{bmatrix}
1 & t_s & 0\\
0 & 1 & t_s\\
0 & \frac{-\beta_{x,y,\omega}}{m} & 0
\end{bmatrix}
\end{align}

As the radio link does not contain any redundancy, a lost packet will be handled by the Kalman filter, by reducing the gain of the filter to zero. If packet verification fails, the filter uses a gain mask $\vec{\Lambda}$ to zero the gains. This mask is post multiplied onto the Kalman gain $\bar{\vec{K}}$ and is defined as:
\begin{align}
\vec{\Lambda} = diag\{\lambda_x,\lambda_{\dot{x}},\lambda_{\ddot{x}},\lambda_{\lambda{y}},\lambda_{\dot{y}},\lambda_{\ddot{y}},\lambda_{\theta},\lambda_{\omega},\lambda_{\alpha} \}
\end{align}
Where the individual $\lambda$s are given as:
\begin{align}
\lambda = 
\left\{
  \begin{array}{l l}
    1 & \quad \text{if measurement is valid}\\
    0 & \quad \text{otherwise}
  \end{array} \right.
\end{align} 
The filter also needs to sort out the different sampling rate aboard the ship. The two main sensors, IMU and GPS, sample at 10 Hz and 1 Hz respectively - which also defines a mask to multiply onto the Kalman filter. This mask puts the gain to zero for the GPS if there is no new sample available. Figure \ref{fig:trends} depicts the absolute error between the true and estimated path for the 3 cases described above.

As the filter only needs to estimate $x,\dot{x},y,\dot{y}$ and $\theta$, an output matrix is post multiplied to generate the final state estimation $\hat{\vec{x}}$ which is fed to the controllers. 

}
%% Column 3
\col{
\paragraph{}
Figure (fig: INSERT FIGURE) depicts the difference in the control signals using the estimates and the other when just using the measurements directly.
\begin{figure}
	\centering % Figure input
	\includegraphics[width=\threecolwidth]{img/10percent}
  	\caption{Simulation of the system where the blue represents a mono-rate filter, the red a filter with zero-gaining when no measurements are available, the green where no zero-gaining takes place, and finally the purple where there is a 10 percent loss rate on the Kalman filter.}
	\label{fig:trends}
\end{figure}
\paragraph{Results}
Results on lost packages. 
Something else?
\paragraph{Conclusion and extensions}
We can from this conclude that there is a problem.
\paragraph{Acknowledgements} A big thanks should be extended to Assistant Professor Carles Navarro Manchón for his help with tuning the Kalman filter. 

\references
\bibliography{litterature}
}
\end{center}

\makefooter
\end{document}





